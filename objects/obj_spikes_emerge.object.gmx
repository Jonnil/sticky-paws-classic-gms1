<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>spr_spikes_emerge</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>obj_wall</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>image_index=1;image_speed=1;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>depth=-bbox_bottom;

/*If enemies are disabled, destroy this object*/if global.enable_enemies=false{instance_destroy();}

if global.spikes_emerge_time&lt;room_speed*1{sprite_index=spr_spikes_emerge_half_out;image_speed=1;mask_index=noone;}
else if global.spikes_emerge_time&lt;room_speed*2 and global.spikes_emerge_time&gt;room_speed*1{sprite_index=spr_spikes_emerge;image_speed=1;mask_index=spr_spikes_emerge;}
else if global.spikes_emerge_time&gt;=room_speed*3{sprite_index=spr_spikes_emerge_in;image_speed=1;mask_index=noone;}
else{sprite_index=spr_spikes_emerge_in;image_speed=1;mask_index=noone;}

if image_angle=0and place_meeting(x,y-2,instance_nearest(x,y,obj_player))and!place_meeting(x-1,y,instance_nearest(x,y,obj_player))and!place_meeting(x+1,y,instance_nearest(x,y,obj_player))and instance_nearest(x,y,obj_player).vspeed&gt;=0
or image_angle=90and place_meeting(x-2,y,instance_nearest(x,y,obj_player))and!place_meeting(x,y-1,instance_nearest(x,y,obj_player))and!place_meeting(x,y+1,instance_nearest(x,y,obj_player))and instance_nearest(x,y,obj_player).hspeed&gt;=0
or image_angle=180and place_meeting(x,y+2,instance_nearest(x,y,obj_player))and!place_meeting(x-1,y,instance_nearest(x,y,obj_player))and!place_meeting(x+1,y,instance_nearest(x,y,obj_player))and instance_nearest(x,y,obj_player).vspeed&lt;=0
or image_angle=270and place_meeting(x+2,y,instance_nearest(x,y,obj_player))and!place_meeting(x,y-1,instance_nearest(x,y,obj_player))and!place_meeting(x,y+1,instance_nearest(x,y,obj_player))and instance_nearest(x,y,obj_player).hspeed&lt;=0
{if instance_nearest(x,y,obj_player).takendamage&lt;1and!(instance_nearest(x,y,obj_player).powerup="white")and sprite_index=spr_spikes_emerge{with(instance_nearest(x,y,obj_player)){if invincible=false{powerupstate-=1;takendamage=100;}}}}

if image_angle=0{if position_meeting(x,y,instance_nearest(x,y,obj_player)){if sprite_index=spr_spikes_emerge{with(instance_nearest(x,y,obj_player)){y-=22;smooth_teleport=0;}}}}
if image_angle=90{if position_meeting(x,y,instance_nearest(x,y,obj_player)){if sprite_index=spr_spikes_emerge{with(instance_nearest(x,y,obj_player)){x-=22;y+=22;smooth_teleport=0;}}}}
if image_angle=180{if position_meeting(x,y,instance_nearest(x,y,obj_player)){if sprite_index=spr_spikes_emerge{with(instance_nearest(x,y,obj_player)){y+=22;smooth_teleport=0;}}}}
if image_angle=270{if position_meeting(x,y,instance_nearest(x,y,obj_player)){if sprite_index=spr_spikes_emerge{with(instance_nearest(x,y,obj_player)){x+=22;y+=22;smooth_teleport=0;}}}}

if image_angle=0{if position_meeting(x,y-4,instance_nearest(x,y,obj_player))and instance_nearest(x,y,obj_player).dive=true{with(instance_nearest(x,y,obj_player)){dive=false;y-=22;smooth_teleport=0;}}}
if image_angle=90{if position_meeting(x-4,y,instance_nearest(x,y,obj_player))and instance_nearest(x,y,obj_player).dive=true{with(instance_nearest(x,y,obj_player)){dive=false;x-=22;y+=22;smooth_teleport=0;}}}
if image_angle=180{if position_meeting(x,y+4,instance_nearest(x,y,obj_player))and instance_nearest(x,y,obj_player).dive=true{with(instance_nearest(x,y,obj_player)){dive=false;y+=22;smooth_teleport=0;}}}
if image_angle=270{if position_meeting(x+4,y,instance_nearest(x,y,obj_player))and instance_nearest(x,y,obj_player).dive=true{with(instance_nearest(x,y,obj_player)){dive=false;x+=22;y+=22;smooth_teleport=0;}}}

if x&lt;view_xview+view_wview-64and x&gt;view_xview+64and y&lt;view_yview+view_hview and y&gt;view_yview{
if image_angle=0and!position_meeting(x,bbox_bottom+4,obj_wall)
or image_angle=90and!position_meeting(bbox_right+4,y,obj_wall)
or image_angle=180and!position_meeting(x,bbox_top-4,obj_wall)
or image_angle=270and!position_meeting(bbox_left-4,y,obj_wall)
{effect_create_above(ef_smoke,x,y,1,c_white);instance_destroy();}}
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
